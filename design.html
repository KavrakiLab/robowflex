<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Robowflex: Robowflex Design Notes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Roboto&family=Roboto+Mono&display=swap" rel="stylesheet">
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Robowflex
   &#160;<span id="projectnumber">v0.1</span>
   </div>
   <div id="projectbrief">Making MoveIt Easy</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('design.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Robowflex Design Notes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__home_runner_work_robowflex_robowflex__docs_markdown_design"></a> </p><h1>Introduction (What is Robowflex?)</h1>
<p>Robowflex is primarily a wrapper around components from other robotics libraries (in particular, components from <em>MoveIt!</em>). The name "Robowflex" is a portmanteau of "Robot" and <a href="https://en.wikipedia.org/wiki/Bowflex">"Bowflex"</a>, as Robowflex was intended just to be better "bench"-marking software (as in <a href="https://en.wikipedia.org/wiki/Bench_press">"bench press"</a>) than the rest. However, the software needed for doing benchmarking was the same as the software needed for running motion planning in "isolation" from a ROS system while still using ROS components, useful for many other things other than benchmarking. Thus, the project has spun out and become a toolbox for motion planning using real robots that are <em>MoveIt!</em> enabled.</p>
<p>The high-level goals of the project are as follows:</p><ol type="1">
<li>Provide an easy to use interface to complex robotics libraries by brushing the cruft and idiosyncrasies under the rug.</li>
<li>Provide access to all underlying capabilities of the libraries so users are not hampered by Robowflex in any way.</li>
<li>Remain untied as possible to the greater ROS system, and support all distros from Kinetic onward.</li>
</ol>
<p>This document provides a high-level overview of the design and API of the <code>robowflex_library</code>, as well as some of the auxiliary components. Unless otherwise noted, the class or method will be in <code>robowflex_library</code>.</p>
<h1>Components</h1>
<p>There are only a few core components in Robowflex that are necessary for planning. A brief overview of them is provided below. Take a look at the <a href="scripts.html">scripts</a> to see the components in action.</p>
<ul>
<li><a class="el" href="classrobowflex_1_1Robot.html" title="Loads information about a robot and maintains information about a robot&#39;s state.">robowflex::Robot</a>: A representation of a robot. This requires a URDF and SRDF, as well as <em>MoveIt!</em>'s joint limits and kinematics plugin information (at least, for <em>MoveIt!</em>-based planning). Along with loading information about the robot's geometry, this class provides some helper methods for setting a robot's state. Each robot has a scratch state that can be modified. Under the hood, the robot is represented with <em>MoveIt!</em>'s <code>robot_model::RobotModel</code>, and the scratch state is a <code>robot_state::RobotState</code>. See the detailed description in Robot for more information.</li>
<li><a class="el" href="classrobowflex_1_1Scene.html" title="Wrapper class around the planning scene and collision geometry.">robowflex::Scene</a>: A representation of a planning scene. Requires a Robot to initialize with. Collision objects can be added and moved (as Geometry, see below) and objects can be attached to the robot used for planning (after they have been added to the scene). Under the hood, the scene is represented with <em>MoveIt!</em>'s <code><a class="elRef" target="_blank" href="http://docs.ros.org/melodic/api/moveit_core/html/classplanning__scene_1_1PlanningScene.html">planning_scene::PlanningScene</a></code>.</li>
<li><a class="el" href="classrobowflex_1_1Geometry.html" title="A class that manages both solid and mesh geometry for various parts of the motion planning system.">robowflex::Geometry</a>: Container of both solid primitives and mesh geometry used in planning requests and collision objects in a scene. A few static methods <code>Geometry::make*</code> are provided to easily create instances of geometry. The class wraps a <code>shapes::Shape</code> and <code>bodies::Body</code>, which are used many places in <em>MoveIt!</em>.</li>
<li><a class="el" href="classrobowflex_1_1Planner.html" title="An abstract interface to a motion planning algorithm.">robowflex::Planner</a>: A motion planner that can compute a plan for a Robot in a Scene. A few default implementations are provided, such as the default OMPL planning pipeline plugin (OMPL::OMPLPipelinePlanner). However, there are many other Planners available, such as the PoolPlanner which enables threaded planning requests, <code>robowflex_ompl</code> which gives direct access to the OMPL state space used in <em>MoveIt!</em>, and <code>robowflex_tesseract</code> provides a planning interface through <a href="https://github.com/ros-industrial-consortium/tesseract">tesseract</a> and <a href="https://github.com/ros-industrial-consortium/trajopt_ros">trajopt</a>.</li>
<li><a class="el" href="classrobowflex_1_1MotionRequestBuilder.html" title="A helper class to build motion planning requests for a robowflex::Planner.">robowflex::MotionRequestBuilder</a>: A helper class to help build a motion planning request for a planner. Simplifies the design of complex goal and path constraints, as well as setting start and goal states.</li>
<li>robowflex::Benchmarker: A utility class that simplifies running a set benchmarks. Different requests (A scene, planner, and request) can be added to a list of experiments to run, along with a set of metrics to compute about the results. Then, the benchmark can be run with multiple BenchmarkOutputter classes, which dump results somehow.</li>
<li>robowflex::BenchmarkOutputter: A class that writes benchmarking results to something. A few useful outputters are provided by default, such as the OMPLBenchmarkOutputter, which dumps results into an OMPL benchmarking log format that can be read (after being made into a database) on <a href="planner_arena.org">Planner Arena</a>.</li>
</ul>
<h1>Connective Tissue</h1>
<p>One of the core challenges that Robowflex tackles is the issues of input / output in a ROS system (see IO). Robowflex provides a few useful things on this front:</p><ul>
<li>Automatic resolution of file paths and ROS package paths (<a class="el" href="namespacerobowflex_1_1IO.html#ab2ba1256c969b810983689062ed7a25d" title="Resolves package:// URLs and relative file paths to their canonical form.">IO::resolvePath()</a> and <a class="el" href="namespacerobowflex_1_1IO.html#a4117e00a49336925d58c9b37f010b0e5" title="Resolves package:// URLs to their canonical form. The path does not need to exist,...">IO::resolvePackage()</a>).</li>
<li>Open XML and unprocessed xacro files to strings (<a class="el" href="namespacerobowflex_1_1IO.html#ad3efd7be4a295a491b9f90317207aaf8" title="Loads an XML or .xacro file to a string.">IO::loadXMLToString()</a>).</li>
<li>Broad <a class="el" href="namespaceYAML.html">YAML</a> conversion for ROS messages (see <a href="yaml_8h_source.html"><code>yaml.h</code></a> and <code><a class="el" href="io_2yaml_8h.html">io/yaml.h</a></code>) compatible with the output dumped by ROS Python and <code>rostopic echo</code>. Many of the components provide methods that serialize / deserialize <a class="el" href="namespaceYAML.html">YAML</a> files.</li>
<li>There are also many useful conversions and transformation-related methods in <code><a class="el" href="tf_8h.html">tf.h</a></code>.</li>
<li>ROS bag file reading / writing (see <a class="el" href="classrobowflex_1_1IO_1_1Bag.html" title="rosbag management class to ease message saving and loading.">robowflex::IO::Bag</a>).</li>
<li>HDF5 file reading (see <a class="el" href="classrobowflex_1_1IO_1_1HDF5File.html" title="An HDF5 File loaded into memory.">robowflex::IO::HDF5File</a>).</li>
<li>Helpful live visualization in RViz through <a class="el" href="classrobowflex_1_1IO_1_1RVIZHelper.html" title="RVIZ visualization helper. See Live Visualization with RViz for more information.">robowflex::IO::RVIZHelper</a>. Offline visualization can be done with Blender through <code><a class="el" href="namespacerobowflex__visualization.html">robowflex_visualization</a></code>. See the <a href="robowflex_visualization/README.html">readme</a> for more details.</li>
</ul>
<p>Additionally, there are a few implementations of <a class="el" href="classrobowflex_1_1Robot.html" title="Loads information about a robot and maintains information about a robot&#39;s state.">robowflex::Robot</a> for some commonly used robots, such as <a class="el" href="classrobowflex_1_1UR5Robot.html" title="Convenience class that describes the default setup for UR5 (with robotiq gripper and load cell) Will ...">robowflex::UR5Robot</a>, <a class="el" href="classrobowflex_1_1FetchRobot.html" title="Convenience class that describes the default setup for Fetch. Will first attempt to load configuratio...">robowflex::FetchRobot</a>, and <a class="el" href="classrobowflex_1_1R2Robot.html" title="Convenience class that describes the default setup for R2 (R2C6 full).">robowflex::R2Robot</a>.</p>
<h1>Compatibility</h1>
<p>Robowflex strives to maintain compatibility with all commonly used ROS distributions, from Kinetic to Noetic. Indigo support was dropped due to lack of ROS Docker support. To this end, there are many adapters and internal constructs so that users can run Robowflex in any of these environments without modification. However, there are some things to note about how various internal APIs have changed and how this affects behavior:</p><ul>
<li><a class="el" href="classrobowflex_1_1ROS.html" title="RAII-pattern for starting up ROS.">robowflex::ROS</a> will attempt to spin up an instance of <code>rosmaster</code> if one is not already running only on Melodic onward, due to a dependency of how this is implemented on Boost 1.64.</li>
<li><em>MoveIt!</em> changed from using <code>Eigen::Affine3d</code> as the representation of transformation matrices to <code>Eigen::Isometry3d</code> in Melodic in version 0.10.6. To account for this, we provide <code><a class="el" href="namespacerobowflex.html#a59139b755558b8adf4a4c78871e68925" title="A pose (point in SE(3)) used in various functions. Defined from what MoveIt! uses.">robowflex::RobotPose</a></code> which is a type alias for the correct matrix representation.</li>
<li><a class="el" href="namespaceYAML.html">YAML</a> output does not "flow" output on Indigo for more concise files.</li>
</ul>
<p>Note that there are other internal functions that account for API differences between ROS versions, but they are not relevant to user code. There are macros in <a href="macros_8h_source.html"><code>macros.h</code></a> that allow for conditional compilation on versions.</p>
<h1>Documentation</h1>
<p>See <a class="el" href="doc.html">here</a> and <a class="el" href="doc.html">here</a> for how documentation is generated. This documents all code in the other Robowflex projects, as well as their <code>README.md</code> files if they exist (see the <code>add_doc</code> macro in <code>.docs/CMakeLists.txt</code>). Additional written documentation is in the <code>.docs/markdown</code> folder. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
            <a href="http://www.kavrakilab.org">Kavraki Lab</a>  &bull;
            <a href="https://www.cs.rice.edu">Department of Computer Science</a> &bull;
            <a href="https://www.rice.edu">Rice University</a> &bull;
            Funded in part by the <a href="https://www.nsf.gov">National Science Foundation</a> &bull;
            Documentation generated by <a href="http://www.doxygen.org/index.html">doxygen</a> 1.9.1
    </li>
  </ul>
</div>
</body>
</html>
