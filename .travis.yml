# branches:
#   only:
#     - master

addons:
  apt:
    packages:
      - doxygen
      - cmake
      - graphviz
      - clang-format

# script:
#   - source ./.travis/check-format.sh

stages:
  - format
  - documentation
  - deploy
jobs:
  include:
  - stage: documentation
    script:
      - source ./.travis/check-format.sh

  - stage: documentation
    if: branch = "master" 
    script:
      - source ./.travis/documentation.sh

  - stage: deploy
    if: branch = "master" 
    deploy:
      strategy: git
      provider: pages
      skip_cleanup: true
      local_dir: .docs/build/doc/html
      github_token: $GH_REPO_TOKEN
      on:
        branch: master
